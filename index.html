<script src="config.txt"></script>
<script>
    localStorage.setItem("theme", "stars");

// Assuming key is defined elsewhere
if (key.length === 0) {
    localStorage.setItem("activated", "false");
}
else{
if (key === "none" || key[0] === undefined) {
    // do nothing
    localStorage.setItem("activated", "false");
} else {
    const keys = ['notakey12412', '896789ug', 'aloi243'];
    console.log(key)
    const isKeyValid = keys.includes(key[0]);

    if (!isKeyValid) {
        // Key is not valid, handle accordingly
    } else {
        localStorage.setItem("activated", "true");
        console.log(authorized_users);
        localStorage.setItem("ips", authorized_users.join(","));
    }
}
}

    // about:blank cloaking
    alert("Please allow pop ups on this site so axiom can cloak itself");
    console.log(authorized_users)
                localStorage.setItem("ips", authorized_users.join(","));
                // console.log(authorized_users)
                localStorage.setItem("ips", authorized_users.join(","));
                console.log(authorized_users)
                localStorage.setItem("ips", authorized_users.join(","));
                console.log(authorized_users)
                localStorage.setItem("ips", authorized_users.join(","));
                console.log(authorized_users)
                localStorage.setItem("ips", authorized_users.join(","));
    

    // load /apps/assets/scripts/global.js and inject into code


    var code = `
        <style>
            body {
                background-color: black;
            }
            iframe {
                border: 0;
            }
        </style>

        <script>
            window.onbeforeunload = confirmExit;
    function confirmExit() {P
        return "The tab has tried to close. This could be a teachers doing. If you want to leave, then you can follow through";
    }
            // onload
            window.onload = function(){
                setInterval(function(){
                    // Set document title and favicon to match the iframe's content
                    var iframe = document.getElementById("iframe");
                    iframe.addEventListener('load', function() {
                        var iframeDocument = iframe.contentDocument || iframe.contentWindow.document;
                        // Check if the iframe's document is available
                        if (iframeDocument) {
                            // Set the title of the main document to the title of the iframe's document
                            document.title = iframeDocument.title;
                            
                            // Set favicon
                            var iframeFavicon = iframeDocument.querySelector("link[rel~='icon']");
                            if (iframeFavicon) {
                                var mainDocumentFavicon = document.querySelector("link[rel~='icon']");
                                if (!mainDocumentFavicon) {
                                    mainDocumentFavicon = document.createElement('link');
                                    mainDocumentFavicon.rel = 'icon';
                                    document.head.appendChild(mainDocumentFavicon);
                                }
                                mainDocumentFavicon.href = iframeFavicon.href;
                            }
                        }
                    });
                },100)
            }
        <\/script>
        
        <script src="/apps/assets/scripts/global.js"><\/script>

        <link rel="stylesheet" href="/apps/assets/scripts/global.css">
        
        <iframe src="main.html" style="height:100%; width:100%;" id="iframe"></iframe>
    `;
    
    var win = window.open();
    win.document.write(code);


    
    // Close the window after the document is completely loaded

    // if current window is loaded, close it

    
    
        window.onload = function() {
            window.location.href = "https://www.nasa.gov";
        };

    
</script>
<body>

<center>
    <h2>
        After allowing popups, you will need to refresh the page to go to Glitch
    </h2>
</center>
    
</body>